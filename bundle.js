(()=>{"use strict";var t={d:(i,e)=>{for(var o in e)t.o(e,o)&&!t.o(i,o)&&Object.defineProperty(i,o,{enumerable:!0,get:e[o]})},o:(t,i)=>Object.prototype.hasOwnProperty.call(t,i)};t.d({},{n:()=>Tt});var i=document.getElementById("layer1"),e=document.getElementById("layer2"),o=document.getElementById("layer3"),a=document.getElementById("layer4");function n(){var t,n,l,r;i.width=window.innerWidth,i.height=window.innerHeight,e.width=window.innerWidth,e.height=window.innerHeight,o.width=window.innerWidth,o.height=window.innerHeight,a.width=window.innerWidth,a.height=window.innerHeight,t=document.querySelector("meta[name='viewport']"),n=document.querySelector("#c"),l=Math.round(visualViewport.scale*visualViewport.width),r=Math.round(visualViewport.scale*visualViewport.height),l<=460||r<=460?(t.setAttribute("content","width=device-width, initial-scale=0.5"),n.style.display="block"):l<=768||r<=768?(t.setAttribute("content","width=device-width, initial-scale=0.725"),n.style.display="block"):(t.setAttribute("content","width=device-width, initial-scale=1.0"),n.style.display="none")}function l(t){var i=t.getContext("2d");return function(e){i.save(),i.beginPath(),e(i,t),i.closePath(),i.restore()}}function r(t){var i=t.getContext("2d");return function(){i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height)}}var s=l(i),f=l(e),h=l(o),d=l(a),c=r(i),p=r(e),y=r(o),u=r(a);n(),window.addEventListener("resize",n);var m,v=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return M(x.apply(void 0,t))},g=44100,w=new(window.AudioContext||webkitAudioContext),M=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var e=w.createBuffer(t.length,t[0].length,g),o=w.createBufferSource();return t.map((function(t,i){return e.getChannelData(i).set(t)})),o.buffer=e,o.connect(w.destination),o.start(),o},x=function(t,i,e,o,a,n,l,r,s,f,h,d,c,p,y,u,m,v,w,M){void 0===t&&(t=1),void 0===i&&(i=.05),void 0===e&&(e=220),void 0===o&&(o=0),void 0===a&&(a=0),void 0===n&&(n=.1),void 0===l&&(l=0),void 0===r&&(r=1),void 0===s&&(s=0),void 0===f&&(f=0),void 0===h&&(h=0),void 0===d&&(d=0),void 0===c&&(c=0),void 0===p&&(p=0),void 0===y&&(y=0),void 0===u&&(u=0),void 0===m&&(m=0),void 0===v&&(v=1),void 0===w&&(w=0),void 0===M&&(M=0);var x,P,T=2*Math.PI,k=s*=500*T/g/g,S=e*=(1+2*i*Math.random()-i)*T/g,b=[],C=0,I=0,A=0,O=1,D=0,R=0,W=0;for(o=o*g+9,w*=g,a*=g,n*=g,m*=g,f*=500*T/Math.pow(g,3),y*=T/g,h*=T/g,d*=g,c=c*g|0,P=o+w+a+n+m|0;A<P;b[A++]=W)++R%(100*u|0)||(W=l?l>1?l>2?l>3?Math.sin(Math.pow(C%T,3)):Math.max(Math.min(Math.tan(C),1),-1):1-(2*C/T%2+2)%2:1-4*Math.abs(Math.round(C/T)-C/T):Math.sin(C),W=(c?1-M+M*Math.sin(T*A/c):1)*(W>0?1:-1)*Math.pow(Math.abs(W),r)*t*.2*(A<o?A/o:A<o+w?1-(A-o)/w*(1-v):A<o+w+a?v:A<P-m?(P-A-m)/n*v:0),W=m?W/2+(m>A?0:(A<P-m?1:(P-A)/m)*b[A-m|0]/2):W),C+=(x=(e+=s+=f)*Math.cos(y*I++))-x*p*(1-1e9*(Math.sin(A)+1)%2),O&&++O>d&&(e+=h,S+=h,O=0),!c||++D%c||(e=S,s=k,O=O||1);return b},P=function(){v.apply(void 0,[1.59,,345,,,.38,3,1.64,2.9,,,,,.2,,.3,.04,.92])},T=function(){v.apply(void 0,[1.38,,334,.17,.14,.11,1,.42,,,,,,,6.8,,.05,.25,.17])},k=function(){v.apply(void 0,[1.01,,1129,.05,.01,0,1,1.11,-89,,,,,,,,,.39,.04,.48])},S={life:100,position:{x:3,y:0},damage:{start:-1/0,duration:600},attack:{type:0,sound:[],start:-1/0,duration:1e3,predelay:0,delay:0,power:10,position:[]},move:{start:-1/0,predelay:1e3,speed:100,position:{x:3,y:3}}},b=function(){return(b=Object.assign||function(t){for(var i,e=1,o=arguments.length;e<o;e++)for(var a in i=arguments[e])Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);return t}).apply(this,arguments)},C=function(t){var i=t.start,e=t.predelay,o=t.speed,a=t.position;S.move=b(b({},S.move),{start:i,predelay:e||S.move.predelay,speed:o||S.move.speed,position:a})},I=function(t){var i=t.type,e=t.start,o=t.position,a=t.predelay,n=t.delay,l=t.duration,r=t.power,s=t.sound;S.attack={type:i,sound:s,start:e,duration:l,predelay:a,delay:n,position:o,power:r}},A={life:100,position:{x:0,y:0},collisionDamage:10,direction:1,attack:{start:-1/0,predelay:80,delay:80,duration:32,power:10},damage:{start:-1/0,duration:400},move:{start:-1/0,speed:50,position:{x:0,y:0}}},O={size:4,tileWidth:120,tileHeight:40},D=function(t){return Math.PI/180*t},R=function(t){var i=t.time,e=t.start,o=t.duration,a=(i-e)/o<0?0:(i-e)/o;return[a<1&&a>0,a,(i-e)/o<0,(i-e)/o>1]},W=function(t){return Math.floor(Math.random()*t)},E=function(t,e){return{x:i.width/2+(t*O.tileWidth-(O.tileWidth+O.tileHeight)-e*O.tileWidth/6),y:i.height/2+(e-.5)+O.tileHeight*(e+.5)-40}},H=function(){return(H=Object.assign||function(t){for(var i,e=1,o=arguments.length;e<o;e++)for(var a in i=arguments[e])Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);return t}).apply(this,arguments)},F=function(t){var i=t.start,e=t.position;A.move=H(H({},A.move),{start:i,position:e})},q=function(t){var i=performance.now();R({time:i,start:A.attack.start,duration:A.attack.duration+A.attack.predelay+A.attack.delay})[0]||(A.attack.start=i,A.direction=t,v.apply(void 0,[,,334,,.08,.09,2,1.52,-7.8,2.1,,,.02,.2,-28,,,.65,.1]))},L=function(t){R({time:performance.now(),start:A.damage.start,duration:A.damage.duration})[0]||(A.damage=H(H({},A.damage),{start:performance.now()}),A.life=A.life-t<0?0:A.life-t,v.apply(void 0,[2.19,,,,,.11,3,.1,-3.7,.8,,,.19,.5,,.4,.19,.87,.06,.18]))},Y=function(t,i,e){if(e||2===arguments.length)for(var o,a=0,n=i.length;a<n;a++)!o&&a in i||(o||(o=Array.prototype.slice.call(i,0,a)),o[a]=i[a]);return t.concat(o||Array.prototype.slice.call(i))};const B=function(t,i,e,o){void 0===o&&(o=125);for(var a,n,l,r,s,f,h,d,c,p,y,u,m,v,w=0,M=[],P=[],T=[],k=0,S=0,b=1,C={},I=g/o*60>>2;b;k++)M=[b=d=u=0],e.map((function(o,g){for(h=i[o][k]||[0,0,0],b|=!!i[o][k],v=u+(i[o][0].length-2-!d)*I,m=g==e.length-1,n=2,r=u;n<h.length+m;d=++n){for(s=h[n],c=n==h.length+m-1&&m||p!=(h[0]||0)|s|0,l=0;l<I&&d;l++>I-99&&c?y+=(y<1)/99:0)f=(1-y)*M[w++]/2||0,P[r]=(P[r]||0)-f*S+f,T[r]=(T[r++]||0)+f*S+f;s&&(y=s%1,S=h[1]||0,(s|=0)&&(M=C[[p=h[w=0]||0,s]]=C[[p,s]]||((a=Y([],t[p],!0))[2]*=Math.pow(2,(s-12)/12),s>0?x.apply(void 0,a):[])))}u=v}));return[P,T]};var X,G,j,z,U,V,N,J=B.apply(void 0,[[[,0,400,,,,,12],[.6,0,25,.002,.02,.08,3,,,,,,,,,.1,.01],[.4,0,655,,,.11,2,1.65,,,,,,3.8,-.1,.1],[2,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.8,0,655,,,.09,3,1.65,,,,,.02,3.8,-.1,,.2]],[[[,,5,5,8,5,5,8,5,5,5,10,5,5,12,5,8,5,5,5,6,5,5,8,5,5,12,5,5,10,5,5,8,5],[1,,17,17,20,17,17,20,17,17,20,17,17,20,17,17,20,17,17,20,17,17,20,17,17,20,17,17,20,17,17,20,17,17],[2,1,,,5,,,5,,,5,,,5,,,5,5,,,5,,,5,,,5,,,5,,,5,5],[3,,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,17],[4,,,,5,,,5,,,5,,,5,,,5,5,,,5,,,5,,,5,,,5,,,5,5]]],[0],120]),K=B.apply(void 0,[[[,0,400],[.6,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.6,0,655,,,.09,3,1.65,,,,,.02,3.8,-.1,,.2],[,0,25,.002,.02,.08,3,,,,,,,,,.1,.01]],[[[,,22,22,25,29,22,22,25,29,20,20,24,27,20,20,24,27,18,18,22,25,18,18,22,25,20,20,24,27,29,27,25,24],[1,-.2,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22],[2,.2,,,22,,,,22,,,,22,,,,22,,,,22,,,,22,,,,22,,,22,22,22],[3,,10,,13,10,,10,13,10,,8,,15,8,,12,,6,,10,13,,6,10,13,,8,,12,15,17,15,13]]],[0],68]),Q=B.apply(void 0,[[[,0,740,,,.15,2,.2,-.1,-.15,9,.02,,.1,.12,,.06],[.7,0,4e3,,,.03,2,1.25,,,,,.02,6.8,-.3,,.5],[.8,0,219,,,,,1.1,,-.1,-50,-.05,-.01,1],[,0,43,,,.25,,,,,,,,2],[.4,0,22,,.07,.07,2,0,,,.5,.01],[,0,655,,,.11,2,1.65,,,,,,3.8,-.1,.1]],[[[,,10,10,13,10,15,10,17,10,,10,13,10,15,10,17,,22,22,25,22,27,22,29,22,,22,25,22,27,22,29,,8,8,12,8,13,8,15,8,,8,12,8,13,8,15,,20,20,24,20,25,20,27,20,,20,24,20,25,20,27,,],[1,,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5,,5,5,5],[2,,,,30,,,,30,,,,30,30,,,30,,,,30,,,,30,,,,30,30,,,30,,,,30,,,,30,,,,30,30,,,30,,,,30,,,,30,,,,30,30,,,30,,],[4,,10,10,,6,10,10,,6,10,10,,6,10,10,,6,10,10,,6,10,10,,6,10,10,,6,10,10,,,8,8,,3,8,8,,3,8,8,,3,8,8,,3,8,8,,3,8,8,,3,8,8,,3,8,8,,,],[5,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,,,20,,]]],[0],84]),Z=B.apply(void 0,[[[,0,740,,,.15,2,.2,-.1,-.15,9,.02,,.1,.12,,.06],[.3,0,900,.02,,.07,4,0,,,,,,4],[.7,0,22,,.07,.07,2,0,,,.5,.01]],[[[,,,,,,,,,,,,,,,,,,22,,22,,25,27,,29,,27,,25,,22,,,20,,20,,17,20,,22,,,,,34,,,,],[1,,22,22,20,,22,22,20,,22,22,20,,22,22,20,,22,22,20,,22,22,20,,22,22,20,,22,22,20,,22,22,20,,22,22,20,,22,22,20,,22,22,20,,]]],[0],120]),$=function(t,i){return void 0===t&&(t=32),void 0===i&&(i="Arial Black"),t+"pt "+i},_="#D5D471",tt="#FFF",it={index:0,openGuide:!1},et=function(t){s((function(t,i){t.setTransform(1,0,0,1,i.width/2,i.height/2),t.globalAlpha=.9,t.fillRect(-i.width/2,-i.height/2,i.width,i.height),t.fillStyle="#fff",t.font=$(18),t.textBaseline="middle",t.textAlign="center",t.fillText("Arrow keys - Move",0,-120),t.fillText("S key - Attack on left tile",0,-90),t.fillText("D key - Attack on right tile",0,-60)})),s((function(t,i){t.strokeStyle="#0F0",t.shadowColor="#FFF",t.shadowOffsetX=8,t.shadowOffsetY=8,t.setTransform(1,0,-.5,1,i.width/2,i.height/2),t.fillStyle="#fac800",t.fillRect(-220,0,120,40),t.setTransform(1,0,-.5,1,i.width/2,i.height/2),t.fillStyle="#fa2b00",t.fillRect(-180,80,120,40)})),s((function(t,i){t.setTransform(1,0,0,1,i.width/2,i.height/2),t.fillStyle="#fff",t.font=$(16),t.fillText("Yellow tile",-60,20),t.fillText("Red tile",-60,100),t.font=$(12),t.fillText("means the position enemy will move to",-60,42),t.fillText("means the position enemy will attack to",-60,120),t.textBaseline="middle",t.textAlign="center",t.fillText("Press S or D key to back to title",0,180)}))},ot=function(t){s((function(t,i){t.beginPath(),t.fillStyle="#475644",t.fillRect(0,0,i.width,i.height),t.closePath()}))},at=function(){(G=M.apply(void 0,K)).loop=!0},nt=function(){G.stop()},lt=function(){Tt.sceneType=0,Tt.music&&at(),X=function(t){t.preventDefault(),console.log(t.target);var i=t.target;if(it.openGuide)"s"!==t.key&&"S"!==t.key&&"d"!==t.key&&"D"!==t.key&&"d"!==i.id&&"s"!==i.id||(k(),it.openGuide=!1);else{if("ArrowLeft"===t.key||"al"===i.id){if(0===it.index)return;it.index-=1,k()}if("ArrowRight"===t.key||"ar"===i.id){if(2===it.index)return;it.index+=1,k()}"s"!==t.key&&"S"!==t.key&&"d"!==t.key&&"D"!==t.key&&"d"!==i.id&&"s"!==i.id||(k(),0===it.index&&(xt(),rt()),1===it.index&&(Tt.music=!Tt.music,Tt.music?at():nt()),2===it.index&&(it.openGuide=!0))}},window.addEventListener("keydown",X),document.addEventListener("touchstart",X)},rt=function(){null==G||G.stop(),Tt.music&&nt(),window.removeEventListener("keydown",X),document.removeEventListener("touchstart",X)},st="#D5D471",ft="#FFF",ht={index:0},dt=function(){wt.stage-=1,Tt.music&&z.stop(),window.removeEventListener("keydown",j),document.removeEventListener("touchstart",j)},ct="#D5D471",pt="#FFF",yt={startTime:0,index:0},ut=function(){Tt.music&&V.stop(),window.removeEventListener("keydown",U),document.removeEventListener("touchstart",U)},mt=[],vt=function(){return(vt=Object.assign||function(t){for(var i,e=1,o=arguments.length;e<o;e++)for(var a in i=arguments[e])Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a]);return t}).apply(this,arguments)},gt=function(t,i,e){if(e||2===arguments.length)for(var o,a=0,n=i.length;a<n;a++)!o&&a in i||(o||(o=Array.prototype.slice.call(i,0,a)),o[a]=i[a]);return t.concat(o||Array.prototype.slice.call(i))},wt={stage:0,countDownSound:[!1,!1,!1],startTime:0,scoreTime:0,playTime:0,player:A,map:O,enemy:S},Mt=function(t){if(wt.playTime=t-wt.startTime,wt.scoreTime=wt.playTime-3e3,wt.playTime<3e3){var i=Math.ceil(wt.playTime/1e3)-1;wt.countDownSound[i]||(v.apply(void 0,[2.35,,377,,,.11,1,2.31,,-4.9,,,,.5,,.4,.1,.68,.08]),wt.countDownSound[i]=!0)}else{if(S.life<=0&&(Pt(),Tt.sceneType=3,Tt.music&&((V=M.apply(void 0,Q)).loop=!0),U=function(t){if("ArrowLeft"===t.key){if(0===yt.index)return;yt.index-=1,k()}if("ArrowRight"===t.key){if(1===yt.index)return;yt.index+=1,k()}"s"!==t.key&&"S"!==t.key&&"d"!==t.key&&"D"!==t.key||(k(),wt.stage<5?0===yt.index&&(xt(),ut()):0===yt.index&&(wt.stage=0,lt(),ut()),1===yt.index&&(wt.stage-=1,xt(),ut()))},setTimeout((function(){window.addEventListener("keydown",U),document.addEventListener("touchstart",U)}),600)),A.life<=0&&(Pt(),Tt.sceneType=2,Tt.music&&(z=M.apply(void 0,Z)),j=function(t){var i=t.target;if("ArrowLeft"===t.key||"al"===i.id){if(0===ht.index)return;ht.index-=1,k()}if("ArrowRight"===t.key||"ar"===i.id){if(1===ht.index)return;ht.index+=1,k()}"S"!==t.key&&"s"!==t.key&&"d"!==t.key&&"D"!==t.key&&"s"!==i.id&&"d"!==i.id||(0===ht.index&&(xt(),dt()),1===ht.index&&(lt(),dt(),wt.stage=0))},window.addEventListener("keydown",j),document.addEventListener("touchstart",j)),(S.move.position.x!==S.position.x||S.move.position.y!==S.position.y)&&S.move.start!==-1/0){var e=R({time:t,start:S.move.start+S.move.predelay,duration:S.move.speed}),o=e[0];e[1]>=1&&(S.position=vt({},S.move.position))}var a=R({time:t,start:A.move.start,duration:A.move.speed}),n=a[0],l=(a[1],a[2],a[3]);if(!n&&l&&(A.position=vt({},A.move.position)),function(t){var i,e=R({time:t,start:A.attack.start+A.attack.predelay,duration:A.attack.duration}),o=e[0];e[1],o&&!R({time:t,start:S.damage.start,duration:S.damage.duration})[0]&&(-1===A.direction&&S.position.x===A.position.x-1&&S.position.y===A.position.y||1===A.direction&&S.position.x===A.position.x+1&&S.position.y===A.position.y)&&(i=A.attack.power,S.damage=b(b({},S.damage),{start:performance.now()}),S.life=S.life-i<0?0:S.life-i,v.apply(void 0,[1.01,,376,,,.11,1,1.65,-8.2,,,,,.4,,.1,,.93,.04]))}(t),S.position.x===A.position.x&&S.position.y===A.position.y&&L(A.collisionDamage),R({time:t,start:S.attack.start+S.attack.predelay,duration:S.attack.duration})[0]&&S.attack.position.some((function(t){var i=t.x,e=t.y;return i===A.position.x&&e===A.position.y}))&&L(S.attack.power),1===wt.stage){var r=R({time:t,start:S.move.start,duration:S.move.predelay+S.move.speed});o=r[0],r[1]>=1&&!o&&(S.position.x!==A.position.x||S.position.y!==A.position.y)&&C({start:t,predelay:800,speed:100,position:{x:A.position.x,y:A.position.y}})}if(2===wt.stage){var s=R({time:t,start:S.attack.start,duration:S.attack.predelay+S.attack.duration+S.attack.delay}),f=(s[0],s[1],s[2],s[3]),h=R({time:t,start:S.move.start,duration:S.move.predelay+S.move.speed}),d=(o=h[0],h[1],h[2],h[3]),c=R({time:t,start:S.attack.start,duration:S.attack.predelay}),p=c[0],y=(c[1],c[2],c[3],R({time:t,start:S.attack.start+S.attack.predelay,duration:S.attack.duration})),u=y[0];y[1],y[2],y[3],p&&(S.attack.sound[0]||(v.apply(void 0,[.3,,166,.08,.48,.99,,.67,,,8,.03,.13,.1,,,,.98,.09,.28]),S.attack.sound[0]=!0)),u&&(S.attack.sound[1]||(v.apply(void 0,[2.01,,521,.03,.03,.06,,1.68,-7.9,-.6,,,,,,.1,.14,.84,.04,.44]),S.attack.sound[1]=!0)),d&&f&&(C({start:t,predelay:500,speed:100,position:{x:Math.floor(4*Math.random()),y:Math.floor(4*Math.random())}}),I({start:t+1200,predelay:800,position:[{x:S.move.position.x,y:0},{x:S.move.position.x,y:1},{x:S.move.position.x,y:2},{x:S.move.position.x,y:3},{x:0,y:S.move.position.y},{x:1,y:S.move.position.y},{x:2,y:S.move.position.y},{x:3,y:S.move.position.y}],delay:0,duration:200,power:30,sound:[!1,!1]}))}if(3===wt.stage){var m=R({time:t,start:S.attack.start+S.attack.predelay,duration:S.attack.duration+S.attack.delay}),g=m[0],w=(m[1],m[2],f=m[3],R({time:t,start:S.move.start,duration:S.move.predelay+S.move.speed}));o=w[0],w[1],w[2],d=w[3],g&&!S.attack.sound[0]&&(v.apply(void 0,[1.87,,695,.05,.13,.52,3,.24,,.7,,,,1,38,.6,.13,.58,.02]),S.attack.sound[0]=!0),d&&C({start:t,predelay:400,speed:200,position:{x:Math.floor(4*Math.random()),y:Math.floor(4*Math.random())}}),f&&I({start:t,predelay:400,delay:200,position:[{x:A.position.x,y:A.position.y}],duration:400,power:20,sound:[!1]})}if(4===wt.stage){var x=R({time:t,start:S.attack.start+S.attack.predelay,duration:S.attack.duration+S.attack.delay}),O=x[0],D=(x[1],x[2],f=x[3],R({time:t,start:S.move.start,duration:S.move.predelay+S.move.speed})),E=(o=D[0],D[1],D[2],d=D[3],R({time:t,start:S.attack.start,duration:S.attack.predelay}));if(p=E[0],E[1],E[2],E[3],p&&(0!==S.attack.type||S.attack.sound[0]||(v.apply(void 0,[1.15,,76,,.24,.08,,1.19,,25,-791,.05,.04,.8,-141,,.12,,.08]),S.attack.sound[0]=!0)),O&&(0!==S.attack.type||S.attack.sound[1]||(v.apply(void 0,[1.99,,378,,.11,.24,,.42,.1,,-765,.04,,.4,,,.21]),S.attack.sound[1]=!0),1!==S.attack.type||S.attack.sound[0]||(v.apply(void 0,[,,840,.05,.06,.08,,1.06,-6.1,,,,,,,,,.73,.01]),S.attack.sound[0]=!0)),d&&f)if(0===(Y=Math.floor(2*Math.random()))){var H={x:W(4),y:W(4)};C({start:t,predelay:200,speed:100,position:H});for(var F={x:W(4),y:W(4)};F.x===S.move.position.x;)F.x=W(4);for(;F.y===S.move.position.y;)F.y=W(4);I({type:0,start:t+300,predelay:1400,delay:200,position:[0,1,2,3].reduce((function(t,i){var e=[0,1,2,3].map((function(t){return{x:i,y:t}})).filter((function(t){var i=t.x,e=t.y;return!(i===H.x&&e===H.y||i===F.x&&e===F.y)}));return gt(gt([],t,!0),e,!0)}),[]),duration:200,power:20,sound:[!1,!1]})}else{var q={x:W(4),y:W(4)};C({start:t,predelay:200,speed:100,position:q}),I({type:1,start:t+200,predelay:600,delay:100,position:[0,1,2,3].map((function(t){return{x:t,y:W(4)}})),duration:200,power:20,sound:[!1]})}}if(5===wt.stage){var Y,B=R({time:t,start:S.attack.start+S.attack.predelay,duration:S.attack.duration+S.attack.delay}),X=B[0],G=(B[1],B[2],f=B[3],R({time:t,start:S.move.start,duration:S.move.predelay+S.move.speed})),N=(o=G[0],G[1],G[2],d=G[3],R({time:t,start:S.attack.start,duration:S.attack.predelay}));p=N[0],N[1],N[2],N[3],p&&(0!==S.attack.type||S.attack.sound[0]||(T(),S.attack.sound[0]=!0),2!==S.attack.type||S.attack.sound[0]||(T(),S.attack.sound[0]=!0)),X&&(0!==S.attack.type||S.attack.sound[1]||(P(),S.attack.sound[1]=!0),1!==S.attack.type||S.attack.sound[0]||(v.apply(void 0,[1.52,,102,,,.3,,2.47,-.6,,,,,.3,,.4,.02,.74,.04,.11]),S.attack.sound[0]=!0),2!==S.attack.type||S.attack.sound[1]||(P(),S.attack.sound[1]=!0)),d&&f&&(0===(Y=W(3))&&(C({start:t,predelay:200,speed:100,position:{x:3*W(2),y:W(2)+1}}),I({type:0,start:t+300,position:3===S.move.position.x?[0,1,2].reduce((function(t,i){var e=[-1,0,1].map((function(t){return{x:i,y:S.move.position.y+t}}));return gt(gt([],t,!0),e,!0)}),[]):0===S.move.position.x?[1,2,3].reduce((function(t,i){var e=[-1,0,1].map((function(t){return{x:i,y:S.move.position.y+t}}));return gt(gt([],t,!0),e,!0)}),[]):void 0,predelay:700,delay:100,duration:400,power:40,sound:[!1,!1]})),1===Y&&(C({start:t,predelay:200,speed:100,position:{x:0===A.position.x?1:3===A.position.x?2:A.position.x-2*W(2)+1,y:A.position.y}}),I({type:1,start:t,position:[{x:A.position.x,y:A.position.y}],predelay:300,delay:100,duration:200,power:30,sound:[!1]})),2===Y&&(C({start:t,predelay:200,speed:100,position:{x:W(2)+1,y:W(2)+1}}),I({type:2,start:t+300,position:[-1,0,1].reduce((function(t,i){var e=[-1,0,1].map((function(t){return{x:S.move.position.x+i,y:S.move.position.y+t}})).filter((function(t){var i=t.x,e=t.y;return i!==S.move.position.x||e!==S.move.position.y}));return gt(gt([],t,!0),e,!0)}),[]),predelay:400,delay:100,duration:400,power:50,sound:[!1,!1]})))}}},xt=function(){wt.stage+=1,wt.startTime=performance.now(),wt.countDownSound=[!1,!1,!1],S={life:100,position:{x:3,y:0},damage:{start:-1/0,duration:600},attack:{type:0,sound:[],start:-1/0,duration:1e3,predelay:0,delay:0,power:10,position:[]},move:{start:-1/0,predelay:1e3,speed:100,position:{x:3,y:3}}},A={life:100,position:{x:0,y:0},collisionDamage:10,direction:1,attack:{start:-1/0,predelay:80,delay:80,duration:32,power:10},damage:{start:-1/0,duration:400},move:{start:-1/0,speed:50,position:{x:0,y:0}}},Tt.music&&((N=M.apply(void 0,J)).loop=!0),Tt.sceneType=1,m=function(t){var i=t.target;if(!(wt.playTime<3e3)){if("ArrowRight"===t.key||"ArrowLeft"===t.key||"ArrowUp"===t.key||"ArrowDown"===t.key||"al"===i.id||"au"===i.id||"ar"===i.id||"ad"===i.id){if(A.move.position.x!==A.position.x||A.move.position.y!==A.position.y)return;"ArrowRight"!==t.key&&"ar"!==i.id||A.position.x!==O.size-1&&F({start:performance.now(),position:{x:A.position.x+1,y:A.position.y}}),"ArrowLeft"!==t.key&&"al"!==i.id||0!==A.position.x&&F({start:performance.now(),position:{x:A.position.x-1,y:A.position.y}}),"ArrowUp"!==t.key&&"au"!==i.id||0!==A.position.y&&F({start:performance.now(),position:{x:A.position.x,y:A.position.y-1}}),"ArrowDown"!==t.key&&"ad"!==i.id||A.position.y!==O.size-1&&F({start:performance.now(),position:{x:A.position.x,y:A.position.y+1}})}"d"!==t.key&&"D"!==t.key&&"s"!==t.key&&"S"!==t.key||("d"!==t.key&&"D"!==t.key&&"d"!==i.id||q(1),"s"!==t.key&&"S"!==t.key&&"s"!==i.id||q(-1))}},window.addEventListener("keydown",m),document.addEventListener("touchstart",m)},Pt=function(){Tt.music&&N.stop(),window.removeEventListener("keydown",m),document.removeEventListener("touchstart",m)},Tt={sceneType:0,music:!1},kt=function(t){c(),p(),y(),u(),0===Tt.sceneType&&function(t){ot(t),s((function(i,e){!function(t){s((function(i,e){i.setTransform(1,0,0,2,e.width/2,e.height/2+20+1*Math.sin(t/80)),i.filter="blur(4px)",i.ellipse(0,50,60,5,0,0,D(360)),i.fillStyle="#222",i.fill()})),s((function(t,i){t.setTransform(1,0,0,1,i.width/2,i.height/2),t.globalAlpha=.3,t.fillStyle="#ffa",t.filter="blur(2px)",t.beginPath(),t.ellipse(0,120,120,20,0,0,D(360)),t.fill(),t.closePath()})),s((function(i,e){i.setTransform(1,0,0,2,e.width/2,e.height/2+20+10*Math.sin(t/80)),i.arc(0,0,40,0,D(360)),i.shadowOffsetX=0,i.shadowOffsetY=0,i.fillStyle="#6A3D3D",i.fill()})),s((function(i,e){i.setTransform(1,0,0,1,e.width/2,e.height/2+20+10*Math.sin(t/80)),i.fillStyle="#000",i.arc(-10,-40,5,0,D(360)),i.arc(10,-40,5,0,D(360)),i.fill()})),s((function(i,e){i.setTransform(1,0,0,1,e.width/2,e.height/2+20+10*Math.sin(t/80)),i.arc(0,-20,10,0,D(180)),i.fillStyle="#000",i.fill()})),s((function(i,e){i.setTransform(1,0,0,1,e.width/2,e.height/2+20+10*Math.sin(t/80)),i.moveTo(-25,10),i.quadraticCurveTo(-40-10*Math.sin(t/80),-20-10*Math.sin(t/80),-25-20*Math.sin(t/80),-60-10*Math.sin(t/80)),i.moveTo(25,10),i.quadraticCurveTo(40+10*Math.sin(t/80),-20-10*Math.sin(t/80),25+20*Math.sin(t/80),-60-10*Math.sin(t/80)),i.stroke()})),s((function(i,e){i.setTransform(1,0,0,1,e.width/2,e.height/2),i.moveTo(-20,70+10*Math.sin(t/80)),i.quadraticCurveTo(-40,80,-40,120),i.moveTo(20,70+10*Math.sin(t/80)),i.quadraticCurveTo(40,80,40,120),i.stroke()})),s((function(i,e){i.setTransform(1,0,0,1,e.width/2,e.height/2+20+10*Math.sin(t/80)),i.moveTo(-10,-60),i.quadraticCurveTo(-20-5*Math.sin(t/80),5*Math.sin(t/80)-120,-40-5*Math.sin(t/80),5*Math.sin(t/80)-80),i.moveTo(10,-60),i.quadraticCurveTo(20+5*Math.sin(t/80),5*Math.sin(t/80)-120,40+5*Math.sin(t/80),5*Math.sin(t/80)-80),i.stroke()})),s((function(t,i){t.setTransform(1,0,0,1,i.width/2,i.height/2),t.globalAlpha=.3,t.fillStyle="#ffa",t.filter="blur(2px)",t.beginPath(),t.moveTo(-120,120),t.lineTo(-40,-250),t.lineTo(40,-250),t.lineTo(120,120),t.ellipse(0,120,120,20,0,0,D(360)),t.fill(),t.closePath()})),s((function(t,i){t.setTransform(1,0,0,1,i.width/2,i.height/2),t.beginPath(),t.fillStyle="#fff",t.shadowOffsetY=6,t.shadowColor="#000",t.ellipse(0,-240,240,20,0,0,D(360)),t.fillStyle="#fff",t.fill(),t.closePath(),t.beginPath(),t.shadowOffsetX=8,t.shadowOffsetY=0,t.ellipse(0,-250,120,60,0,D(180),D(360)),t.fillStyle="#D5D471",t.fill(),t.closePath(),t.beginPath(),t.ellipse(0,-250,120,10,0,D(0),D(360)),t.shadowOffsetX=8,t.shadowOffsetY=1,t.fillStyle="#C4C639",t.fill(),t.closePath()}))}(t)})),s((function(t,i){t.setTransform(1,0,0,1,i.width/2,i.height/2-160),t.textBaseline="middle",t.textAlign="center",t.font=$(48),t.fillStyle="#fff",t.shadowOffsetX=6,t.shadowOffsetY=6,t.shadowColor="#000",t.fillText("ASTROACH",0,0)})),s((function(t,i){t.setTransform(1,0,0,1,i.width/2,i.height/2+200),t.textBaseline="middle",t.textAlign="center",t.shadowColor="#000",t.shadowOffsetX=4,t.shadowOffsetY=4,t.font=$(24),t.beginPath(),0===it.index?t.fillStyle=_:t.fillStyle=tt,t.fillText("START",-240,0),t.closePath(),t.beginPath(),1===it.index?t.fillStyle=_:t.fillStyle=tt,t.fillText("MUSIC",0,0),t.closePath(),t.beginPath(),2===it.index?t.fillStyle=_:t.fillStyle=tt,t.fillText("GUIDE",240,0),t.closePath(),t.beginPath(),1===it.index?t.fillStyle=_:t.fillStyle=tt,t.font=$(20),Tt.music?t.fillText("ON",0,40):t.fillText("OFF",0,40),t.closePath()})),it.openGuide&&et(t)}(t),1===Tt.sceneType&&function(t){var e,o,a;switch(Mt(t),function(t){var i=t.time,e=t.enemy,o=t.map,a=o.size,n=o.tileWidth,l=o.tileHeight,r=R({time:i,start:e.move.start,duration:e.move.predelay})[0],f=R({time:i,start:e.attack.start,duration:e.attack.predelay})[0];1===wt.stage&&s((function(t,i){t.beginPath();var e=t.createLinearGradient(0,0,0,innerHeight);e.addColorStop(.3,"#0D0D0D"),e.addColorStop(.39,"#401410"),e.addColorStop(.4,"#D97652"),e.addColorStop(.8,"#8C3420"),t.fillStyle=e,t.fillRect(0,0,i.width,i.height),t.closePath()})),2===wt.stage&&s((function(t,i){t.beginPath();var e=t.createLinearGradient(0,0,0,innerHeight);e.addColorStop(.35,"#252E3E"),e.addColorStop(.4,"#44A748"),e.addColorStop(.4,"#96DF50"),e.addColorStop(.8,"#5FBF03"),t.fillStyle=e,t.fillRect(0,0,i.width,i.height),t.closePath()})),3===wt.stage&&s((function(t,i){t.beginPath();var e=t.createLinearGradient(0,0,0,innerHeight);e.addColorStop(.34,"#1B1A1F"),e.addColorStop(.38,"#FB3D31"),e.addColorStop(.4,"#CC1017"),e.addColorStop(.8,"#51191E"),t.fillStyle=e,t.fillRect(0,0,i.width,i.height),t.closePath()})),4===wt.stage&&s((function(t,i){t.beginPath();var e=t.createLinearGradient(0,0,0,innerHeight);e.addColorStop(.36,"#182026"),e.addColorStop(.38,"#B6DBF2"),e.addColorStop(.6,"#8BBBD9"),e.addColorStop(.8,"#759CBF"),t.fillStyle=e,t.fillRect(0,0,i.width,i.height),t.closePath()})),5===wt.stage&&s((function(t,i){t.beginPath();var e=t.createLinearGradient(0,0,0,innerHeight);e.addColorStop(.38,"#0D0D0D"),e.addColorStop(.39,"#F2F2F2"),e.addColorStop(.6,"#D7D7D9"),e.addColorStop(.8,"#979DA6"),t.fillStyle=e,t.fillRect(0,0,i.width,i.height),t.closePath()})),s((function(t,i){if(t.fillStyle="#fff",!mt.length)for(var e=0;e<50;e++){var o=Math.random()*i.width,a=Math.random()*(i.height/3),n=.5*(Math.random()-.5),l=0*(Math.random()-.5),r=2*Math.random()+1;mt.push({x:o,y:a,dx:n,dy:l,radius:r})}mt.forEach((function(e,o){var a=e.x,n=e.y,l=e.dx,r=e.dy,s=e.radius,f=a+2*l,h=n+2*r;f<0&&(mt[o].dx=-l),h<0&&(mt[o].dy=-r),f>i.width&&(mt[o].dx=-l),h>i.height&&(mt[o].dy=-r),mt[o].x=f,mt[o].y=h,t.beginPath(),t.arc(f,h,s,0,D(360)),t.fill(),t.closePath()}))})),s((function(t,i){t.setTransform(1,0,-.5,1,i.width/2-n*a/2+n/4,i.height/2-40),t.lineWidth=2,1===wt.stage&&(t.strokeStyle="#5A290C",t.shadowColor="#240000"),2===wt.stage&&(t.strokeStyle="#252E3E",t.shadowColor="#0B020E"),3===wt.stage&&(t.strokeStyle="#51191E",t.shadowColor="#1B1A1F"),4===wt.stage&&(t.strokeStyle="#182026",t.shadowColor="#182026"),5===wt.stage&&(t.strokeStyle="#0D0D0D",t.shadowColor="#0D0D0D"),t.shadowOffsetX=8,t.shadowOffsetY=8;for(var o=function(i){for(var o=function(o){r&&e.move.position.x===o&&e.move.position.y===i?(t.shadowOffsetX=8,t.shadowOffsetY=8,t.fillStyle="#fac800",t.fillRect(n*o,l*i,n,l),t.shadowOffsetX=0,t.shadowOffsetY=0,t.strokeRect(n*o,l*i,n,l)):f&&e.attack.position.some((function(t){var e=t.x,a=t.y;return o===e&&i===a}))?(t.shadowOffsetX=8,t.shadowOffsetY=8,t.fillStyle="#fa2b00",t.fillRect(n*o,l*i,n,l),t.shadowOffsetX=0,t.shadowOffsetY=0,t.strokeRect(n*o,l*i,n,l)):(t.shadowOffsetX=8,t.shadowOffsetY=8,t.fillStyle="#fff",t.fillRect(n*o,l*i,n,l),t.shadowOffsetX=0,t.shadowOffsetY=0,t.strokeRect(n*o,l*i,n,l))},s=0;s<a;s++)o(s)},s=0;s<a;s++)o(s)}))}({map:wt.map,enemy:S,time:t}),e={player:A.life,enemy:S.life},o=e.player,a=e.enemy,d((function(t,i){t.setTransform(1,0,0,1,i.width/2-140,i.height/2+240),t.font=$(18),t.shadowOffsetX=3,t.shadowOffsetY=3,t.shadowColor="#000",t.fillStyle="#fff",t.fillText("ROACH",-100,28),t.fillStyle="#FFA",t.fillRect(10,10,2*o,20)})),d((function(t,i){t.setTransform(1,0,0,1,i.width/2-140,i.height/2+240),t.font=$(18),t.shadowOffsetX=3,t.shadowOffsetY=3,t.shadowColor="#000",t.fillStyle="#fff",t.fillText("ENEMY",-100,0),t.fillStyle="#F99",t.fillRect(10,-20,2*a,20)})),function(t){var e=t.time,o=t.player,a=t.map,n=R({time:e,start:o.attack.start,duration:o.attack.predelay+o.attack.duration+o.attack.delay}),l=n[0],r=n[1],s=R({time:e,start:o.move.start,duration:o.move.speed}),d=s[0],c=s[1];if(!R({time:e,start:o.damage.start,duration:o.damage.duration})[0]||Math.ceil(e)%4!=0){var p=Math.sin(e/240),y=d?i.width/2+(-(a.tileWidth+a.tileHeight)+(o.position.x+(o.move.position.x-o.position.x)*c)*a.tileWidth-(o.position.y+(o.move.position.y-o.position.y)*c)*a.tileWidth/6):i.width/2+(-(a.tileWidth+a.tileHeight)+o.position.x*a.tileWidth-o.position.y*a.tileWidth/6),u=d?i.height/2+(o.position.y+(o.move.position.y-o.position.y)*c-.5)*a.tileHeight-40:i.height/2+(o.position.y-.5)*a.tileHeight-40,m=function(t){t.setTransform(1,0,0,1,y,u),t.beginPath(),t.globalAlpha=.4,1===A.direction?l?t.ellipse(4-10*r,42,35-1*p,10-p,0,0,2*Math.PI):t.ellipse(4,42,35-1*p,10-p,0,0,2*Math.PI):l?t.ellipse(0+10*r,42,35-1*p,10-p,0,0,2*Math.PI):t.ellipse(0,42,35-1*p,10-p,0,0,2*Math.PI),t.shadowOffsetX=0,t.shadowOffsetY=0,1===wt.stage&&(t.fillStyle="#000"),t.fill(),t.closePath(),t.setTransform(1,0,0,1,y,u),t.beginPath(),t.globalAlpha=1,-1===o.direction&&t.scale(-1,1),l&&t.rotate(D(-20)*Math.pow(r,2)*(3*r-3)),t.ellipse(0,p,20,40,0,0,2*Math.PI),t.shadowOffsetX=0,t.shadowOffsetY=0,t.fillStyle="#6A3D3D",t.fill(),t.closePath(),t.beginPath(),t.arc(0,-20+p,3,0,D(360)),t.arc(10,-20+p,3,0,D(360)),t.fillStyle="#000",t.fill(),t.closePath(),t.beginPath(),t.moveTo(-10,-10+p),l?t.quadraticCurveTo(-10,20-30*Math.sin(Math.PI*r),30+5*Math.sin(Math.PI*r),10+5*Math.sin(Math.PI*r)):t.quadraticCurveTo(-10,20+2*p,30,10-2*p),t.moveTo(16,-10+p),l?t.quadraticCurveTo(20,20-30*Math.sin(Math.PI*r),30+5*Math.sin(Math.PI*r),10+5*Math.sin(Math.PI*r)):t.quadraticCurveTo(20,20+2*p,30,10-2*p),t.stroke(),t.closePath(),t.beginPath(),t.moveTo(-10,20),l?t.quadraticCurveTo(-5+p,28+p,-10-10*Math.sin(Math.PI*r),48):d?t.quadraticCurveTo(-5+p,28+p,-10-10*Math.sin(Math.PI*c),48):t.quadraticCurveTo(-5+p,28+p,-10,48),t.moveTo(14,20),l?t.quadraticCurveTo(24+p+2*Math.sin(Math.PI*r),20+p+2*Math.sin(Math.PI*r),20+4*Math.sin(Math.PI*r),40-4*Math.sin(Math.PI*r)):d?t.quadraticCurveTo(24+p+2*Math.sin(Math.PI*c),20+p+2*Math.sin(Math.PI*c),20+4*Math.sin(Math.PI*c),40-4*Math.sin(Math.PI*c)):t.quadraticCurveTo(24+p,20+p,20,40),t.stroke(),t.closePath(),t.beginPath(),t.moveTo(-10,-28+p),l?t.quadraticCurveTo(10+p,-80+p,2*p-24+12*Math.sin(r*Math.PI),-60-2*p-12*Math.sin(r*Math.PI)):t.quadraticCurveTo(10+p,-80+p,2*p-24,-60-2*p),t.moveTo(10,-28+p),l?t.quadraticCurveTo(40+p,-80+p,1+2*p+12*Math.sin(r*Math.PI),-60-2*p-12*Math.sin(r*Math.PI)):t.quadraticCurveTo(40+p,-80+p,1+2*p,-60-2*p),t.stroke(),t.closePath(),t.beginPath(),-1===o.direction?t.setTransform(1,0,0,1,y-28,u+22-Math.sin(e/240)):t.setTransform(1,0,0,1,y+28,u+22-Math.sin(e/240)),-1===o.direction&&t.scale(-1,1),t.fillStyle="#afa",l&&t.rotate(D(-180)*Math.pow(r,2)*(3*r-3)),t.rotate(D(200-Math.sin(e/240))),t.fillRect(0,0,10,120),t.fillStyle="#000",t.fillRect(0,0,10,20),t.closePath()};A.position.y<S.position.y?f((function(t,i){return m(t)})):h((function(t,i){return m(t)}))}}({time:t,player:A,map:O}),wt.stage){case 1:!function(t){var e=t.map,o=t.enemy,a=t.time,n=R({time:a,start:o.move.start+o.move.predelay,duration:o.move.speed}),l=n[0],r=n[1],s=l?i.width/2+(-(e.tileWidth+e.tileHeight)+(o.position.x+(o.move.position.x-o.position.x)*r)*e.tileWidth-(o.position.y+(o.move.position.y-o.position.y)*r)*e.tileWidth/6):i.width/2+(-(e.tileWidth+e.tileHeight)+o.position.x*e.tileWidth-o.position.y*e.tileWidth/6),d=l?i.height/2+(o.position.y+(o.move.position.y-o.position.y)*r-.5)*e.tileHeight+2*Math.sin(a/240)-40:i.height/2+(o.position.y-.5)*e.tileHeight+2*Math.sin(a/240)-40,c=R({time:a,start:o.damage.start,duration:o.damage.duration})[0];if(!c||Math.ceil(a)%8!=0){var p=function(t,i){t.setTransform(1,0,0,1,s,d),t.beginPath(),t.ellipse(0,40-2*Math.sin(a/240),44-1*Math.sin(a/240),12-1*Math.sin(a/240),0,0,D(360)),t.fillStyle="#000",t.globalAlpha=.4,t.fill(),t.beginPath(),t.globalAlpha=1,t.ellipse(0,12,45,28,0,0,D(360)),l&&(t.globalAlpha=.5),t.arc(0,0,40,0,D(360)),t.fillStyle=c?"#fa9":"#fed1ff",t.fill(),t.closePath(),t.beginPath(),t.arc(-20,-10,6,0,D(360)),t.fillStyle="#000",t.fill(),t.closePath(),t.beginPath(),t.arc(10,-10,7,0,D(360)),t.fillStyle="#000",t.fill(),t.closePath(),t.beginPath(),t.fillStyle="#fff",t.fillRect(-10,16,10,10),t.closePath(),t.beginPath(),t.lineWidth=2,t.moveTo(-30,14),t.quadraticCurveTo(-10,20,20,14),t.stroke(),t.closePath()};S.position.y<=A.position.y?f((function(t,i){return p(t)})):h((function(t,i){return p(t)}))}}({time:t,enemy:S,map:O,player:A});break;case 2:!function(t){var e=t.map,o=t.enemy,a=t.time,n=R({time:a,start:o.move.start+o.move.predelay,duration:o.move.speed}),l=n[0],r=n[1],s=R({time:a,start:o.attack.start,duration:o.attack.predelay}),c=s[0],p=s[1],y=R({time:a,start:o.attack.start+o.attack.predelay,duration:o.attack.duration}),u=y[0],m=y[1],v=l?i.width/2+(-(e.tileWidth+e.tileHeight)+(o.position.x+(o.move.position.x-o.position.x)*r)*e.tileWidth-(o.position.y+(o.move.position.y-o.position.y)*r)*e.tileWidth/6):i.width/2+(-(e.tileWidth+e.tileHeight)+o.position.x*e.tileWidth-o.position.y*e.tileWidth/6),g=(l?i.height/2+(o.position.y+(o.move.position.y-o.position.y)*r-.5)*e.tileHeight+2*Math.sin(a/240):i.height/2+(o.position.y-.5)*e.tileHeight+2*Math.sin(a/240))-40,w=R({time:a,start:o.damage.start,duration:o.damage.duration})[0],M=function(t){w&&Math.ceil(a)%6==0||(t.setTransform(1,0,0,1,v,g),t.beginPath(),t.ellipse(0,40-2*Math.sin(a/240),40-1*Math.sin(a/240),10-1*Math.sin(a/240),0,0,D(360)),t.globalAlpha=.4,t.fillStyle="#000",t.fill(),t.closePath(),t.beginPath(),t.setTransform(1,0,0,1,v,g),t.globalAlpha=1,t.fillStyle=w?"#f66":"#5cab73",t.arc(0,0,40,0,D(360)),t.fill(),t.closePath(),t.beginPath(),t.arc(-20,0,10,0,D(360)),t.fillStyle="#fff",t.fill(),t.closePath(),t.beginPath(),t.arc(5,0,10,0,D(360)),t.fillStyle="#fff",t.fill(),t.closePath(),t.beginPath(),t.arc(-8,15,10,D(20),D(140)),t.fillStyle="#fff",t.fill(),t.closePath())},x=function(t){t.setTransform(1,0,0,1,v,g),t.beginPath(),c&&(t.arc(-80,0,20*Math.sin(p*Math.PI/2),0,D(360)),t.fillStyle="#fffa6b",t.fill(),t.arc(80,0,20*Math.sin(p*Math.PI/2),0,D(360)),t.fillStyle="#fffa6b",t.fill(),t.closePath(),t.setTransform(-1,0,0,-1,v,g),t.beginPath(),t.fillStyle="#fffa6b",t.rotate(D(115)),t.arc(60,0,20*Math.sin(p*Math.PI/2),0,D(360)),t.fill(),t.closePath()),u&&(t.setTransform(1,0,0,1,v,g),t.arc(-80,0,20*Math.cos(m*Math.PI/2),0,D(360)),t.fillStyle="#fffa6b",t.fill(),t.arc(80,0,20*Math.cos(m*Math.PI/2),0,D(360)),t.fillStyle="#fffa6b",t.fill(),t.closePath(),t.setTransform(-1,0,0,-1,v,g),t.beginPath(),t.fillStyle="#fffa6b",t.rotate(D(115)),t.arc(60,0,20*Math.cos(m*Math.PI/2),0,D(360)),t.fill(),t.closePath(),t.setTransform(-1,0,0,1,v,g),t.beginPath(),t.fillStyle="#fffa6b",t.fillRect(80,-20*Math.sin(Math.PI*m)/2,1e4,20*Math.sin(Math.PI*m)),t.closePath(),t.setTransform(1,0,0,1,v,g),t.beginPath(),t.fillStyle="#fffa6b",t.fillRect(80,-20*Math.sin(Math.PI*m)/2,1e4,20*Math.sin(Math.PI*m)),t.closePath(),t.setTransform(-1,0,0,-1,v,g),t.beginPath(),t.fillStyle="#fffa6b",t.rotate(D(115)),t.fillRect(60,-20*Math.sin(Math.PI*m)/2,1e4,20*Math.sin(Math.PI*m)),t.closePath())},P=function(t){c&&(t.setTransform(1,0,0,1,v,g),t.beginPath(),t.fillStyle="#fffa6b",t.rotate(D(115)),t.arc(40,0,20*Math.sin(p*Math.PI/2),0,D(360)),t.fill(),t.closePath()),u&&d((function(t,i){t.setTransform(1,0,0,1,v,g),t.beginPath(),t.fillStyle="#fffa6b",t.rotate(D(115)),t.arc(40,0,20*Math.cos(m*Math.PI/2),0,D(360)),t.fill(),t.closePath(),t.setTransform(1,0,0,1,v,g),t.beginPath(),t.fillStyle="#fffa6b",t.rotate(D(115)),t.fillRect(40,-20*Math.sin(Math.PI*m)/2,1e4,20*Math.sin(Math.PI*m)),t.closePath()}))};S.position.y<A.position.y?f((function(t){return x(t)})):h((function(t){return x(t)})),S.position.y<A.position.y?f((function(t){return M(t)})):h((function(t){return M(t)})),S.position.y<A.position.y?f((function(t){return P(t)})):h((function(t){return P(t)}))}({time:t,enemy:S,map:O,player:A});break;case 3:!function(t){var e,o,a,n,l,r,d=t.map,c=t.enemy,p=t.time,y=R({time:p,start:c.move.start+c.move.predelay,duration:c.move.speed}),u=y[0],m=y[1],v=R({time:p,start:c.attack.start+c.attack.predelay,duration:c.attack.duration}),g=v[0],w=v[1],M=u?i.width/2+(-(d.tileWidth+d.tileHeight)+(c.position.x+(c.move.position.x-c.position.x)*m)*d.tileWidth-(c.position.y+(c.move.position.y-c.position.y)*m)*d.tileWidth/6):i.width/2+(-(d.tileWidth+d.tileHeight)+c.position.x*d.tileWidth-c.position.y*d.tileWidth/6),x=(u?i.height/2+(c.position.y+(c.move.position.y-c.position.y)*m-.5)*d.tileHeight+2*Math.sin(p/240):i.height/2+(c.position.y-.5)*d.tileHeight+2*Math.sin(p/240))-40,P=R({time:p,start:c.damage.start,duration:c.damage.duration})[0],T=function(t,i){t.setTransform(1,0,0,1,M,x),t.beginPath(),t.ellipse(0,40-2*Math.sin(p/240),40-1*Math.sin(p/240),10-1*Math.sin(p/240),0,0,D(360)),t.fillStyle="#000",t.globalAlpha=.4,t.fill(),t.closePath(),P&&Math.ceil(p)%8==0||(t.setTransform(1,0,0,1,M,x),t.globalAlpha=1,t.beginPath(),u&&(t.globalAlpha=.5),t.arc(0,0,40,0,D(360)),t.fillStyle=P?"#fa9":"#f33",t.arc(0,0,40,0,D(360)),t.moveTo(-25,-20),t.lineTo(-20,-50),t.lineTo(-5,-20),t.moveTo(5,-20),t.lineTo(20,-50),t.lineTo(25,-20),t.fill(),t.closePath(),t.beginPath(),t.arc(-12,-10,14,D(90),D(180)),t.fillStyle="#000",t.fill(),t.closePath(),t.beginPath(),t.arc(0,-10,14,D(-10),D(110)),t.fillStyle="#000",t.fill(),t.closePath(),t.beginPath(),t.arc(-5,22,12,D(170),D(-10)),t.fillStyle="#000",t.fill(),t.closePath())},k=function(t,i){if(g){var e=E(S.attack.position[0].x,S.attack.position[0].y),o=e.x,a=e.y;t.beginPath(),t.fillStyle="#f00",t.filter="blur(8px)",t.setTransform(1,0,0,1,o,a),t.fillRect(-52,-100*Math.sin(w*Math.PI),100,100*Math.sin(w*Math.PI)),t.closePath(),t.beginPath(),t.fillStyle="#ff0",t.filter="blur(8px)",t.setTransform(1,0,0,1,o,a),t.fillRect(-26,-100*Math.sin(w*Math.PI),50,100*Math.sin(w*Math.PI)),t.closePath()}};(null===(e=S.attack.position[0])||void 0===e?void 0:e.y)<A.position.y&&(null===(o=S.attack.position[0])||void 0===o?void 0:o.y)<S.position.y?(s((function(t,i){return k(t)})),S.position.y<A.position.y?f((function(t,i){return T(t)})):h((function(t,i){return T(t)}))):(null===(a=S.attack.position[0])||void 0===a?void 0:a.y)<S.position.y&&(null===(n=S.attack.position[0])||void 0===n?void 0:n.y)>=A.position.y?(f((function(t,i){return k(t)})),S.position.y<A.position.y?f((function(t,i){return T(t)})):h((function(t,i){return T(t)}))):(null===(l=S.attack.position[0])||void 0===l?void 0:l.y)>=S.position.y&&(null===(r=S.attack.position[0])||void 0===r?void 0:r.y)<A.position.y?(S.position.y<A.position.y?f((function(t,i){return T(t)})):h((function(t,i){return T(t)})),f((function(t,i){return k(t)}))):(S.position.y<A.position.y?f((function(t,i){return T(t)})):h((function(t,i){return T(t)})),h((function(t,i){return k(t)})))}({time:t,enemy:S,map:O,player:A});break;case 4:!function(t){var e=t.map,o=t.enemy,a=t.time,n=R({time:a,start:o.move.start+o.move.predelay,duration:o.move.speed}),l=n[0],r=n[1],c=R({time:a,start:o.attack.start+o.attack.predelay,duration:o.attack.duration}),p=c[0],y=c[1],u=R({time:a,start:o.attack.start,duration:o.attack.predelay}),m=u[0],v=u[1],g=l?i.width/2+(-(e.tileWidth+e.tileHeight)+(o.position.x+(o.move.position.x-o.position.x)*r)*e.tileWidth-(o.position.y+(o.move.position.y-o.position.y)*r)*e.tileWidth/6):i.width/2+(-(e.tileWidth+e.tileHeight)+o.position.x*e.tileWidth-o.position.y*e.tileWidth/6),w=(l?i.height/2+(o.position.y+(o.move.position.y-o.position.y)*r-.5)*e.tileHeight+2*Math.sin(a/240):i.height/2+(o.position.y-.5)*e.tileHeight+2*Math.sin(a/240))-40,M=R({time:a,start:o.damage.start,duration:o.damage.duration})[0],x=function(t){t.setTransform(1,0,0,1,g,w),t.beginPath(),t.ellipse(0,40-2*Math.sin(a/240),40-1*Math.sin(a/240),10-1*Math.sin(a/240),0,0,D(360)),t.fillStyle="#000",t.globalAlpha=.4,t.fill(),t.closePath(),M&&Math.ceil(a)%8==0||(t.setTransform(1,0,0,1,g,w),t.globalAlpha=1,t.beginPath(),l&&(t.globalAlpha=.5),t.arc(0,0,40,0,D(360)),t.fillStyle=M?"#fa9":"#0ff",t.arc(0,0,30,0,D(360)),t.fill(),t.beginPath(),t.arc(-25,-10,10,D(-40),D(120)),t.fillStyle="#000",t.fill(),t.closePath(),t.beginPath(),t.arc(5,-10,12,D(20),D(-120)),t.fillStyle="#000",t.fill(),t.closePath(),t.beginPath(),t.lineWidth=2,t.moveTo(-20,20),t.quadraticCurveTo(-20,0,5,20),t.stroke(),t.closePath())},P=function(t,i,e){var o=E(i,e),a=o.x,n=o.y;t.setTransform(1,0,-.5,1,a,n),t.beginPath(),t.fillStyle="#ccfffb",t.globalAlpha=.5,t.fillRect(-60*v,-20*v,120*v,40*v),t.fill(),t.closePath()},T=function(t,i,e){var o=E(i,e),a=o.x,n=o.y;t.setTransform(1,0,-.5,1,a-60*(1-y),n-20*(1-y)),t.setTransform(1,0,0,1,0,0),t.beginPath();var l=Math.sin(Math.PI*y);t.fillStyle="#ccfffb",t.globalAlpha=1-y,t.moveTo(a-20*l,n+10),t.lineTo(a-30*l,n-120*l),t.lineTo(a+l,n+5),t.fill(),t.closePath()},k=function(t,i,e){var o=E(i,e),a=o.x,n=o.y;t.setTransform(1,0,0,1,a,n-125+130*y),t.beginPath(),t.fillStyle="#ccfffb",t.arc(0,-75,10*(1-y),D(180),D(-20*y)),t.moveTo(0,0),t.lineTo(-10,-75*(1-y)),t.lineTo(10,-75),t.fill(),t.closePath()};S.position.y<A.position.y?f((function(t,i){return x(t)})):d((function(t,i){return x(t)})),(p||m)&&(0===S.attack.type&&S.attack.position.forEach((function(t){var i=t.x,e=t.y;e<A.position.y&&e<S.position.y?(p&&s((function(t,o){return T(t,i,e)})),m&&s((function(t,o){return P(t,i,e)}))):e<S.position.y&&e>=A.position.y?(p&&h((function(t,o){return T(t,i,e)})),m&&s((function(t,o){return P(t,i,e)}))):e>=S.position.y&&e<A.position.y?(p&&f((function(t,o){return T(t,i,e)})),m&&s((function(t,o){return P(t,i,e)}))):(p&&d((function(t,o){return T(t,i,e)})),m&&s((function(t,o){return P(t,i,e)})))})),1===S.attack.type&&S.attack.position.forEach((function(t){var i=t.x,e=t.y;e<A.position.y&&e<S.position.y?s((function(t,o){return k(t,i,e)})):e<S.position.y&&e>=A.position.y?h((function(t,o){return k(t,i,e)})):e>=S.position.y&&e<A.position.y?f((function(t,o){return k(t,i,e)})):d((function(t,o){return k(t,i,e)}))})))}({time:t,enemy:S,map:O,player:A});break;case 5:!function(t){var e=t.map,o=t.enemy,a=t.time,n=R({time:a,start:o.move.start+o.move.predelay,duration:o.move.speed}),l=n[0],r=n[1],c=R({time:a,start:o.attack.start+o.attack.predelay,duration:o.attack.duration}),p=c[0],y=c[1],u=R({time:a,start:o.attack.start,duration:o.attack.predelay}),m=u[0],v=u[1],g=l?i.width/2+(-(e.tileWidth+e.tileHeight)+(o.position.x+(o.move.position.x-o.position.x)*r)*e.tileWidth-(o.position.y+(o.move.position.y-o.position.y)*r)*e.tileWidth/6):i.width/2+(-(e.tileWidth+e.tileHeight)+o.position.x*e.tileWidth-o.position.y*e.tileWidth/6),w=(l?i.height/2+(o.position.y+(o.move.position.y-o.position.y)*r-.5)*e.tileHeight+2*Math.sin(a/240):i.height/2+(o.position.y-.5)*e.tileHeight+2*Math.sin(a/240))-40,M=R({time:a,start:o.damage.start,duration:o.damage.duration})[0],x=function(t){t.setTransform(1,0,0,1,g,w),t.beginPath(),t.ellipse(0,40-2*Math.sin(a/240),40-1*Math.sin(a/240),10-1*Math.sin(a/240),0,0,D(360)),t.fillStyle="#000",t.globalAlpha=.4,t.fill(),t.closePath(),M&&Math.ceil(a)%8==0||(t.setTransform(1,0,0,1,g,w),t.globalAlpha=1,t.beginPath(),t.filter="blur(4px)",l&&(t.globalAlpha=.5),t.arc(0,0,40,0,D(360)),t.fillStyle=M?"#fa9":"#000",t.fill(),t.closePath(),t.beginPath(),t.filter="blur(2px)",t.arc(-20,-10,5,0,D(360)),t.fillStyle="#fff",t.fill(),t.closePath(),t.beginPath(),t.arc(10,-10,5,0,D(360)),t.fillStyle="#fff",t.fill(),t.closePath())},P=function(t){if(p){var i=E(S.position.x,S.position.y),e=i.x,o=i.y;t.setTransform(1,0,0,1,e,o-40),t.beginPath(),S.attack.position[0].x>S.position.x&&t.scale(-1,1),t.moveTo(0,0),t.filter="blur(2px)",t.lineTo(0,-20),t.lineTo(-140*Math.sin(y*Math.PI),0),t.lineTo(0,20),t.fill(),t.closePath()}},T=function(t){if(m){var i=E(S.position.x,S.position.y),e=i.x,o=i.y;0===S.position.x?t.setTransform(1,0,0,1,e+80,o-40+2*Math.sin(a/240)):t.setTransform(1,0,0,1,e-80,o-40+2*Math.sin(a/240)),t.filter="blur(4px)",t.scale(1,2),t.rotate(a),t.beginPath(),t.fillStyle="#fff",t.fillRect(-60*v,-60*v,120*v,120*v),t.closePath(),t.beginPath(),t.fillStyle="#000",t.fillRect(-50*v,-50*v,100*v,100*v),t.closePath()}},k=function(t){if(p){var i=E(S.position.x,S.position.y),e=i.x,o=i.y;0===S.position.x?t.setTransform(1,0,0,1,e+80,o-40+2*Math.sin(a/240)):t.setTransform(1,0,0,1,e-80,o-40+2*Math.sin(a/240)),t.filter="blur(4px)",t.scale(1,2),t.rotate(a),t.beginPath(),t.fillStyle="#fff",t.fillRect(-60*Math.cos(y*Math.PI/2),-60*Math.cos(y*Math.PI/2),120*Math.cos(y*Math.PI/2),120*Math.cos(y*Math.PI/2)),t.closePath(),t.beginPath(),t.fillStyle="#000",t.fillRect(-50*Math.cos(y*Math.PI/2),-50*Math.cos(y*Math.PI/2),100*Math.cos(y*Math.PI/2),100*Math.cos(y*Math.PI/2)),t.closePath(),t.setTransform(1,0,0,1,e-20,o-40+2*Math.sin(a/240)),t.filter="blur(4px)",t.rotate(D(180)),0===S.position.x?t.scale(-1,2):t.scale(1,2),t.beginPath(),t.fillStyle="#000",0===S.position.x?t.fillRect(100,-80*Math.sin(Math.PI*y)/2,1e4,80*Math.sin(Math.PI*y)):t.fillRect(60,-80*Math.sin(Math.PI*y)/2,1e4,80*Math.sin(Math.PI*y)),t.closePath()}},b=function(t,i,e){if(m){var o=E(i,e),a=o.x,n=o.y;t.beginPath(),t.setTransform(1,0,0,1,a,n),t.scale(2,1),t.arc(0,0,12*Math.sin(v*Math.PI/2),0,D(360)),t.fill(),t.closePath()}},C=function(t,i,e){if(p){var o=E(i,e),a=o.x,n=o.y;t.beginPath(),t.setTransform(1,0,0,1,a,n),t.scale(2,1),t.arc(0,0,12*Math.cos(y*Math.PI/2),0,D(360)),t.fill(),t.closePath()}},I=function(t,i,e){if(p){var o=E(i,e),a=o.x,n=o.y;t.beginPath(),t.setTransform(1,0,0,1,a,n-20),t.scale(1,6*(.5+.5*y)),t.arc(0,-200*y,12,0,D(360)),t.fill(),t.closePath()}};S.position.y<A.position.y?f((function(t,i){return x(t)})):d((function(t,i){return x(t)})),(p||m)&&(0===S.attack.type&&(A.position.y<=S.position.y+1?(h((function(t){return T(t)})),h((function(t){return k(t)}))):(f((function(t){return T(t)})),f((function(t){return k(t)})))),1===S.attack.type&&(A.position.y<=S.position.y?h((function(t){return P(t)})):s((function(t){return P(t)}))),2===S.attack.type&&S.attack.position.forEach((function(t){var i=t.x,e=t.y;e<A.position.y&&e<S.position.y?(s((function(t,o){return C(t,i,e)})),s((function(t,o){return b(t,i,e)})),s((function(t,o){return I(t,i,e)}))):e<S.position.y&&e>=A.position.y?(h((function(t,o){return C(t,i,e)})),s((function(t,o){return b(t,i,e)})),s((function(t,o){return I(t,i,e)}))):e>=S.position.y&&e<A.position.y?(f((function(t,o){return C(t,i,e)})),s((function(t,o){return b(t,i,e)})),s((function(t,o){return I(t,i,e)}))):(d((function(t,o){return C(t,i,e)})),s((function(t,o){return b(t,i,e)})),s((function(t,o){return I(t,i,e)})))})))}({time:t,enemy:S,map:O,player:A})}!function(t){var i=t.game;if(i.playTime<3e3){var e=Math.ceil((3e3-i.playTime)/1e3);d((function(t,i){t.setTransform(1,0,0,1,i.width/2-24,i.height/2-80),t.shadowColor="#000",t.shadowOffsetX=4,t.shadowOffsetY=4,t.font=$(48),t.fillStyle="#fff",t.fillText(e.toString(),0,0)}))}}({game:wt}),function(t){if(wt.scoreTime>0){var i=Math.round(wt.scoreTime)/1e3,e=Math.floor(i/60);d((function(t,o){t.setTransform(1,0,0,1,o.width/2+140,o.height/2+240),t.font=$(18),t.shadowColor="#000",t.shadowOffsetX=3,t.shadowOffsetY=3,t.fillStyle="#fff",t.fillText(e.toString().padStart(2,"0")+":"+i.toFixed(2).padStart(5,"0"),0,0)}))}else{var o=Math.round(wt.scoreTime)/1e3;Math.floor(o/60),d((function(t,i){t.setTransform(1,0,0,1,i.width/2+140,i.height/2+240),t.font=$(18),t.shadowColor="#000",t.shadowOffsetX=3,t.shadowOffsetY=3,t.fillStyle="#fff",t.fillText("00:00.00",0,0)}))}}()}(t),2===Tt.sceneType&&(s((function(t,i){t.beginPath(),t.fillStyle="#475644",t.fillRect(0,0,i.width,i.height),t.closePath()})),s((function(t,i){t.textBaseline="middle",t.textAlign="center",t.font=$(),t.fillStyle="#fff",t.shadowOffsetX=3,t.shadowOffsetY=3,t.shadowColor="#000",t.fillText("Game Over",i.width/2,i.height/2-40),t.font=$(18),0===ht.index?t.fillStyle=st:t.fillStyle=ft,t.textBaseline="middle",t.textAlign="center",t.fillText("RETRY",i.width/2-80,i.height/2+40),t.closePath(),t.beginPath(),1===ht.index?t.fillStyle=st:t.fillStyle=ft,t.fillText("TITLE",i.width/2+80,i.height/2+40),t.closePath(),t.beginPath()}))),3===Tt.sceneType&&function(t){var i=Math.sin(t/60),e=Math.round(wt.scoreTime)/1e3,o=Math.floor(e/60);s((function(t,i){t.lineWidth=2,t.beginPath(),t.fillStyle="#475644",t.fillRect(0,0,i.width,i.height),t.closePath()})),s((function(t,e){t.setTransform(1,0,0,1,e.width/2-180,e.height/2),t.ellipse(0,10*i,30,60,0,0,2*Math.PI),t.shadowOffsetX=0,t.shadowOffsetY=0,t.fillStyle="#6A3D3D",t.fill()})),s((function(t,e){t.setTransform(1,0,0,1,e.width/2-170,e.height/2+10*i),t.arc(0,i,8,0,D(180)),t.shadowOffsetX=0,t.shadowOffsetY=0,t.fillStyle="#000",t.fill()})),s((function(t,e){t.setTransform(1,0,0,1,e.width/2-180,e.height/2+10*i),t.arc(0,-20+i,4,0,D(360)),t.arc(20,-20+i,4,0,D(360)),t.fillStyle="#000",t.fill()})),s((function(t,e){t.setTransform(1,0,0,1,e.width/2-180,e.height/2+10*i),t.moveTo(-15,-10+i),t.quadraticCurveTo(20,20+10*i,35,10+30*i),t.moveTo(30,-10+i),t.quadraticCurveTo(50,20-10*i,65,10-30*i),t.stroke()})),s((function(t,e){t.setTransform(1,0,0,1,e.width/2-180,e.height/2+20),t.moveTo(-10,20+10*i),t.quadraticCurveTo(10+10*i,40-10*i,-10,68),t.moveTo(14,20+10*i),t.quadraticCurveTo(48+10*i,40-10*i,20,60),t.stroke()})),s((function(t,e){t.setTransform(1,0,0,1,e.width/2-174,e.height/2-20),t.moveTo(-10,10*i-28),t.quadraticCurveTo(10+5*i,5*i-80,10*i-24,-60-10*i),t.moveTo(10,10*i-28),t.quadraticCurveTo(40+5*i,5*i-80,1+10*i,-60-10*i),t.stroke()})),s((function(t,i){t.textBaseline="middle",t.textAlign="center",t.font=$(),t.fillStyle="#fff",t.shadowOffsetX=3,t.shadowOffsetY=3,t.shadowColor="#000",t.fillText("Stage "+wt.stage+" Clear",i.width/2,i.height/2-160),t.font=$(18),t.fillText("Time : "+o.toString().padStart(2,"0")+":"+e.toFixed(2).padStart(5,"0"),i.width/2+40,i.height/2-20),t.fillText("Rest life : "+A.life.toString().padStart(2,"0")+"%",i.width/2+40,i.height/2+40),5===wt.stage&&t.fillText("Thank you for playing!",i.width/2,i.height/2-220),0===yt.index?t.fillStyle=ct:t.fillStyle=pt,t.textBaseline="middle",t.textAlign="center",5===wt.stage?t.fillText("TITLE",i.width/2-80,i.height/2+160):t.fillText("NEXT",i.width/2-80,i.height/2+160),t.closePath(),t.beginPath(),1===yt.index?t.fillStyle=ct:t.fillStyle=pt,t.fillText("RETRY",i.width/2+80,i.height/2+160),t.closePath(),t.beginPath()}))}(t),requestAnimationFrame(kt)};requestAnimationFrame(kt),lt()})();